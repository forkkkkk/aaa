/*! @qhr */
!function(I){function g(C){if(n[C])return n[C].exports;var t=n[C]={i:C,l:!1,exports:{}};return I[C].call(t.exports,t,t.exports,g),t.l=!0,t.exports}var n={};g.m=I,g.c=n,g.d=function(I,n,C){g.o(I,n)||Object.defineProperty(I,n,{configurable:!1,enumerable:!0,get:C})},g.n=function(I){var n=I&&I.__esModule?function(){return I.default}:function(){return I};return g.d(n,"a",n),n},g.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},g.p="",g(g.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index_css__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__index_css__);\n\n\nvar app = {\n    util: {},\n    store: {}\n};\napp.util = {\n    $: function(selector , node){\n        return (node || document).querySelector(selector);\n    },\n    formatTime: function(ms){\n        var d = new Date(ms);\n        var pad = function(s){  //将5月变为05月 5->05 12->12\n            if(s<10){\n                s= '0'+s;\n            }\n            return s;\n        }\n        var year = d.getFullYear();\n        var month = d.getMonth()+1;//月份从0开始\n        var date = d.getDate();\n        var hour = d.getHours();\n        var minute = d.getMinutes();\n        var second = d.getSeconds();\n        return year + '-' + pad(month) + '-' + pad(date) + ' ' + pad(hour) + ':' + pad(minute) + ':' + pad(second);\n    }\n};\n//storage module\napp.store = {\n    __store_key: '__sticky_note__',\n    get: function(id){\n        var notes = this.getNotes();\n        return notes[id] || {};\n    },\n    set: function(id, content){\n        var notes = this.getNotes();\n        if(notes[id]){\n            Object.assign(notes[id],content);\n        }else{\n            notes[id] = content;\n        }\n        localStorage[this.__store_key] = JSON.stringify(notes);\n        console.log('save note id'+id+'content'+JSON.stringify(notes[id]));\n    },\n    remove: function(id){\n        var notes = this.getNotes();\n        delete notes[id];\n        localStorage[this.__store_key] = JSON.stringify(notes);\n    },\n    getNotes: function(){\n        return JSON.parse( localStorage[this.__store_key] || '{}' );\n    }\n        \n};\n\n\n(function(util,store){\n    var $ = util.$;\n    var movedNote = null;\n    var startX;\n    var startY;\n    var maxZIndex = 0;\n\n\n    var noteTpl = `\n    <i class='u-close'></i>\n    <div class='u-editor' contenteditable=\"true\"></div>\n    <div class='u-timestamp'>\n      <span>更新：</span>\n      <span class='time'></span>\n    </div>\n    `;\n\n    function Note(options){\n        var note = document.createElement('div');\n        note.className = 'm-note';\n        note.id = options.id || 'm-note-' + Date.now();\n        note.innerHTML = noteTpl;\n        $('.u-editor',note).innerHTML = options.content || '';\n        note.style.left = options.left + 'px';\n        note.style.top = options.top + 'px';\n        note.style.zIndex = options.zIndex;\n        document.body.appendChild(note);\n        this.note = note;\n        this.updateTime(options.updateTime);\n        this.addEvent();\n    }\n    Note.prototype.updateTime = function(ms){\n        var ts = $('.time',this.note);\n        ms = ms || Date.now();\n        ts.innerHTML = util.formatTime(ms);\n        this.updateTimeInMs = ms;\n    }\n    Note.prototype.save = function(){\n        store.set(this.note.id,{\n            left:this.note.offsetLeft,\n            top:this.note.offsetTop,\n            zIndex:parseInt(this.note.style.zIndex),\n            content:$('.u-editor',this.note).innerHTML,\n            updateTime:$('.time',this.note).innerHTML,\n            updateTime: this.updateTimeInMs\n        })\n    }\n    Note.prototype.close = function(e){\n        console.log('note.prototype.close say:close');\n        document.body.removeChild(this.note);\n    };\n    Note.prototype.addEvent = function(){  \n        //note便签的mousedown事件\n        var mousedownHandler = function(e){\n            movedNote = this.note;\n            startX = e.clientX - this.note.offsetLeft;\n            startY = e.clientY - this.note.offsetTop;\n            //console.log(startX)\n            if(parseInt(this.note.style.zIndex) !== maxZIndex-1){\n                this.note.style.zIndex = maxZIndex++;\n                store.set(this.note.id,{\n                    zIndex: maxZIndex-1\n                });\n\n            }\n        }.bind(this);\n        this.note.addEventListener('mousedown', mousedownHandler);\n        //便签的输入事件\n        var editor = $('.u-editor',this.note);\n        var inputTimer;\n        var inputHandler = function(e){\n            var content = editor.innerHTML;\n            clearTimeout(inputTimer);\n            //console.log(this)\n            inputTimer = setTimeout(function(){\n                var time = Date.now();\n                store.set(this.note.id,{\n                    content:content,\n                    updateTime: time\n                });\n                this.updateTime(time);\n            }.bind(this),300);\n        }.bind(this);\n        editor.addEventListener('input', inputHandler);\n\n        //关闭事件处理函数\n        var closeBtn = $('.u-close', this.note); \n        var closeHandler = function(e){\n            store.remove(this.note.id);\n            this.close(e);\n            closeBtn.removeEventListener('click', closeHandler);\n            closeBtn.removeEventListener('mousedown', mousedownHandler);\n        }.bind(this);\n        closeBtn.addEventListener('click', closeHandler);\n    }\n    document.addEventListener('DOMContentLoaded', function(e){\n        //创建按钮事件\n        $('#create').addEventListener('click' , function(e){\n             var note = new Note({\n                left:Math.random()*(window.innerWidth-220),\n                top:Math.random()*(window.innerHeight-320),\n                zIndex:maxZIndex++\n            });\n            note.save();\n        });\n        //移动监听\n        function mousemoveHandler(e){\n            if(!movedNote){\n                return;\n            }\n            movedNote.style.left = e.clientX - startX + 'px';\n            movedNote.style.top = e.clientY - startY + 'px';\n        };\n        function mouseupHandler(e){\n            if(!movedNote){\n                return;\n            }\n            store.set(movedNote.id,{\n                left: movedNote.offsetLeft,\n                top: movedNote.offsetTop\n            });\n            movedNote = null;\n        } \n        document.addEventListener('mousemove', mousemoveHandler);\n        document.addEventListener('mouseup', mouseupHandler);\n\n        //初始化notes\n        var notes = store.getNotes();\n        Object.keys(notes).forEach(function(id){\n            var options = notes[id];\n            if(maxZIndex < options.zIndex){\n                maxZIndex = options.zIndex;\n            }\n            new Note(Object.assign(notes[id],{\n                id:id\n            })); \n            maxZIndex += 1;\n        });\n    });\n\n})(app.util,app.store)//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9pbmRleC5qcz8yNjQ1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBOztBQUVBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxnRUFBZ0U7QUFDaEU7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUOztBQUVBO0FBQ0EsZ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLEc7QUFDYjtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMLENBQUMiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG52YXIgYXBwID0ge1xuICAgIHV0aWw6IHt9LFxuICAgIHN0b3JlOiB7fVxufTtcbmFwcC51dGlsID0ge1xuICAgICQ6IGZ1bmN0aW9uKHNlbGVjdG9yICwgbm9kZSl7XG4gICAgICAgIHJldHVybiAobm9kZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSxcbiAgICBmb3JtYXRUaW1lOiBmdW5jdGlvbihtcyl7XG4gICAgICAgIHZhciBkID0gbmV3IERhdGUobXMpO1xuICAgICAgICB2YXIgcGFkID0gZnVuY3Rpb24ocyl7ICAvL+WwhjXmnIjlj5jkuLowNeaciCA1LT4wNSAxMi0+MTJcbiAgICAgICAgICAgIGlmKHM8MTApe1xuICAgICAgICAgICAgICAgIHM9ICcwJytzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHZhciBtb250aCA9IGQuZ2V0TW9udGgoKSsxOy8v5pyI5Lu95LuOMOW8gOWni1xuICAgICAgICB2YXIgZGF0ZSA9IGQuZ2V0RGF0ZSgpO1xuICAgICAgICB2YXIgaG91ciA9IGQuZ2V0SG91cnMoKTtcbiAgICAgICAgdmFyIG1pbnV0ZSA9IGQuZ2V0TWludXRlcygpO1xuICAgICAgICB2YXIgc2Vjb25kID0gZC5nZXRTZWNvbmRzKCk7XG4gICAgICAgIHJldHVybiB5ZWFyICsgJy0nICsgcGFkKG1vbnRoKSArICctJyArIHBhZChkYXRlKSArICcgJyArIHBhZChob3VyKSArICc6JyArIHBhZChtaW51dGUpICsgJzonICsgcGFkKHNlY29uZCk7XG4gICAgfVxufTtcbi8vc3RvcmFnZSBtb2R1bGVcbmFwcC5zdG9yZSA9IHtcbiAgICBfX3N0b3JlX2tleTogJ19fc3RpY2t5X25vdGVfXycsXG4gICAgZ2V0OiBmdW5jdGlvbihpZCl7XG4gICAgICAgIHZhciBub3RlcyA9IHRoaXMuZ2V0Tm90ZXMoKTtcbiAgICAgICAgcmV0dXJuIG5vdGVzW2lkXSB8fCB7fTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24oaWQsIGNvbnRlbnQpe1xuICAgICAgICB2YXIgbm90ZXMgPSB0aGlzLmdldE5vdGVzKCk7XG4gICAgICAgIGlmKG5vdGVzW2lkXSl7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGVzW2lkXSxjb250ZW50KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBub3Rlc1tpZF0gPSBjb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGxvY2FsU3RvcmFnZVt0aGlzLl9fc3RvcmVfa2V5XSA9IEpTT04uc3RyaW5naWZ5KG5vdGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3NhdmUgbm90ZSBpZCcraWQrJ2NvbnRlbnQnK0pTT04uc3RyaW5naWZ5KG5vdGVzW2lkXSkpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihpZCl7XG4gICAgICAgIHZhciBub3RlcyA9IHRoaXMuZ2V0Tm90ZXMoKTtcbiAgICAgICAgZGVsZXRlIG5vdGVzW2lkXTtcbiAgICAgICAgbG9jYWxTdG9yYWdlW3RoaXMuX19zdG9yZV9rZXldID0gSlNPTi5zdHJpbmdpZnkobm90ZXMpO1xuICAgIH0sXG4gICAgZ2V0Tm90ZXM6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKCBsb2NhbFN0b3JhZ2VbdGhpcy5fX3N0b3JlX2tleV0gfHwgJ3t9JyApO1xuICAgIH1cbiAgICAgICAgXG59O1xuXG5cbihmdW5jdGlvbih1dGlsLHN0b3JlKXtcbiAgICB2YXIgJCA9IHV0aWwuJDtcbiAgICB2YXIgbW92ZWROb3RlID0gbnVsbDtcbiAgICB2YXIgc3RhcnRYO1xuICAgIHZhciBzdGFydFk7XG4gICAgdmFyIG1heFpJbmRleCA9IDA7XG5cblxuICAgIHZhciBub3RlVHBsID0gYFxuICAgIDxpIGNsYXNzPSd1LWNsb3NlJz48L2k+XG4gICAgPGRpdiBjbGFzcz0ndS1lZGl0b3InIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSd1LXRpbWVzdGFtcCc+XG4gICAgICA8c3Bhbj7mm7TmlrDvvJo8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz0ndGltZSc+PC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICBmdW5jdGlvbiBOb3RlKG9wdGlvbnMpe1xuICAgICAgICB2YXIgbm90ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBub3RlLmNsYXNzTmFtZSA9ICdtLW5vdGUnO1xuICAgICAgICBub3RlLmlkID0gb3B0aW9ucy5pZCB8fCAnbS1ub3RlLScgKyBEYXRlLm5vdygpO1xuICAgICAgICBub3RlLmlubmVySFRNTCA9IG5vdGVUcGw7XG4gICAgICAgICQoJy51LWVkaXRvcicsbm90ZSkuaW5uZXJIVE1MID0gb3B0aW9ucy5jb250ZW50IHx8ICcnO1xuICAgICAgICBub3RlLnN0eWxlLmxlZnQgPSBvcHRpb25zLmxlZnQgKyAncHgnO1xuICAgICAgICBub3RlLnN0eWxlLnRvcCA9IG9wdGlvbnMudG9wICsgJ3B4JztcbiAgICAgICAgbm90ZS5zdHlsZS56SW5kZXggPSBvcHRpb25zLnpJbmRleDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RlKTtcbiAgICAgICAgdGhpcy5ub3RlID0gbm90ZTtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lKG9wdGlvbnMudXBkYXRlVGltZSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnQoKTtcbiAgICB9XG4gICAgTm90ZS5wcm90b3R5cGUudXBkYXRlVGltZSA9IGZ1bmN0aW9uKG1zKXtcbiAgICAgICAgdmFyIHRzID0gJCgnLnRpbWUnLHRoaXMubm90ZSk7XG4gICAgICAgIG1zID0gbXMgfHwgRGF0ZS5ub3coKTtcbiAgICAgICAgdHMuaW5uZXJIVE1MID0gdXRpbC5mb3JtYXRUaW1lKG1zKTtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lSW5NcyA9IG1zO1xuICAgIH1cbiAgICBOb3RlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgc3RvcmUuc2V0KHRoaXMubm90ZS5pZCx7XG4gICAgICAgICAgICBsZWZ0OnRoaXMubm90ZS5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgdG9wOnRoaXMubm90ZS5vZmZzZXRUb3AsXG4gICAgICAgICAgICB6SW5kZXg6cGFyc2VJbnQodGhpcy5ub3RlLnN0eWxlLnpJbmRleCksXG4gICAgICAgICAgICBjb250ZW50OiQoJy51LWVkaXRvcicsdGhpcy5ub3RlKS5pbm5lckhUTUwsXG4gICAgICAgICAgICB1cGRhdGVUaW1lOiQoJy50aW1lJyx0aGlzLm5vdGUpLmlubmVySFRNTCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRoaXMudXBkYXRlVGltZUluTXNcbiAgICAgICAgfSlcbiAgICB9XG4gICAgTm90ZS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgY29uc29sZS5sb2coJ25vdGUucHJvdG90eXBlLmNsb3NlIHNheTpjbG9zZScpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMubm90ZSk7XG4gICAgfTtcbiAgICBOb3RlLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uKCl7ICBcbiAgICAgICAgLy9ub3Rl5L6/562+55qEbW91c2Vkb3du5LqL5Lu2XG4gICAgICAgIHZhciBtb3VzZWRvd25IYW5kbGVyID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBtb3ZlZE5vdGUgPSB0aGlzLm5vdGU7XG4gICAgICAgICAgICBzdGFydFggPSBlLmNsaWVudFggLSB0aGlzLm5vdGUub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgIHN0YXJ0WSA9IGUuY2xpZW50WSAtIHRoaXMubm90ZS5vZmZzZXRUb3A7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN0YXJ0WClcbiAgICAgICAgICAgIGlmKHBhcnNlSW50KHRoaXMubm90ZS5zdHlsZS56SW5kZXgpICE9PSBtYXhaSW5kZXgtMSl7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlLnN0eWxlLnpJbmRleCA9IG1heFpJbmRleCsrO1xuICAgICAgICAgICAgICAgIHN0b3JlLnNldCh0aGlzLm5vdGUuaWQse1xuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6IG1heFpJbmRleC0xXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm5vdGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2Vkb3duSGFuZGxlcik7XG4gICAgICAgIC8v5L6/562+55qE6L6T5YWl5LqL5Lu2XG4gICAgICAgIHZhciBlZGl0b3IgPSAkKCcudS1lZGl0b3InLHRoaXMubm90ZSk7XG4gICAgICAgIHZhciBpbnB1dFRpbWVyO1xuICAgICAgICB2YXIgaW5wdXRIYW5kbGVyID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVkaXRvci5pbm5lckhUTUw7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5wdXRUaW1lcik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMpXG4gICAgICAgICAgICBpbnB1dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciB0aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5zZXQodGhpcy5ub3RlLmlkLHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDpjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lOiB0aW1lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUaW1lKHRpbWUpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLDMwMCk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaW5wdXRIYW5kbGVyKTtcblxuICAgICAgICAvL+WFs+mXreS6i+S7tuWkhOeQhuWHveaVsFxuICAgICAgICB2YXIgY2xvc2VCdG4gPSAkKCcudS1jbG9zZScsIHRoaXMubm90ZSk7IFxuICAgICAgICB2YXIgY2xvc2VIYW5kbGVyID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBzdG9yZS5yZW1vdmUodGhpcy5ub3RlLmlkKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoZSk7XG4gICAgICAgICAgICBjbG9zZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlSGFuZGxlcik7XG4gICAgICAgICAgICBjbG9zZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBtb3VzZWRvd25IYW5kbGVyKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlSGFuZGxlcik7XG4gICAgfVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgLy/liJvlu7rmjInpkq7kuovku7ZcbiAgICAgICAgJCgnI2NyZWF0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyAsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgIHZhciBub3RlID0gbmV3IE5vdGUoe1xuICAgICAgICAgICAgICAgIGxlZnQ6TWF0aC5yYW5kb20oKSood2luZG93LmlubmVyV2lkdGgtMjIwKSxcbiAgICAgICAgICAgICAgICB0b3A6TWF0aC5yYW5kb20oKSood2luZG93LmlubmVySGVpZ2h0LTMyMCksXG4gICAgICAgICAgICAgICAgekluZGV4Om1heFpJbmRleCsrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5vdGUuc2F2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy/np7vliqjnm5HlkKxcbiAgICAgICAgZnVuY3Rpb24gbW91c2Vtb3ZlSGFuZGxlcihlKXtcbiAgICAgICAgICAgIGlmKCFtb3ZlZE5vdGUpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vdmVkTm90ZS5zdHlsZS5sZWZ0ID0gZS5jbGllbnRYIC0gc3RhcnRYICsgJ3B4JztcbiAgICAgICAgICAgIG1vdmVkTm90ZS5zdHlsZS50b3AgPSBlLmNsaWVudFkgLSBzdGFydFkgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBtb3VzZXVwSGFuZGxlcihlKXtcbiAgICAgICAgICAgIGlmKCFtb3ZlZE5vdGUpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JlLnNldChtb3ZlZE5vdGUuaWQse1xuICAgICAgICAgICAgICAgIGxlZnQ6IG1vdmVkTm90ZS5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgICAgIHRvcDogbW92ZWROb3RlLm9mZnNldFRvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtb3ZlZE5vdGUgPSBudWxsO1xuICAgICAgICB9IFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZW1vdmVIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBIYW5kbGVyKTtcblxuICAgICAgICAvL+WIneWni+WMlm5vdGVzXG4gICAgICAgIHZhciBub3RlcyA9IHN0b3JlLmdldE5vdGVzKCk7XG4gICAgICAgIE9iamVjdC5rZXlzKG5vdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gbm90ZXNbaWRdO1xuICAgICAgICAgICAgaWYobWF4WkluZGV4IDwgb3B0aW9ucy56SW5kZXgpe1xuICAgICAgICAgICAgICAgIG1heFpJbmRleCA9IG9wdGlvbnMuekluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IE5vdGUoT2JqZWN0LmFzc2lnbihub3Rlc1tpZF0se1xuICAgICAgICAgICAgICAgIGlkOmlkXG4gICAgICAgICAgICB9KSk7IFxuICAgICAgICAgICAgbWF4WkluZGV4ICs9IDE7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KShhcHAudXRpbCxhcHAuc3RvcmUpXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9pbmRleC5jc3M/NzM4MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2luZGV4LmNzc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")}]);